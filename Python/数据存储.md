# 数据存储

1. JSON
2. CSV
3. MySQL
4. mongodb

## JSON 支持数据格式：

1. 对象（字典）。使用花括号。dict
2. 数组（列表）。使用方括号。list
3. 整形、浮点型、布尔类型还有null类型。int float bool 
4. 字符串类型（字符串必须要用双引号，不能用单引号）。str

多个数据之间使用逗号分开。
注意：json 本质上就是一个字符串。

## dumps 函数将字典和列表转 JSON
```
import json
books = [
    {'1':'刘'},
    {'2':'RONG'}
]
print(type(books))
jsonStr = json.dumps(books)
print(type(jsonStr))
print(jsonStr)

print(json.dumps(books,ensure_ascii=False))
---
<class 'list'>
<class 'str'>
[{"1": "\u5218"}, {"2": "RONG"}]
[{"1": "刘"}, {"2": "RONG"}]
```

因为 json 在 dump 的时候，只能存放 ascii 的字符，因此会将中文进行转义，这时候我们可以使用 ensure_ascii=False 关闭这个特性。

在 Python 中。只有基本数据类型才能转换成 JSON格式的字符串。即：int、float、str、list、dict、tuple。

## dump 函数将 JSON 数据直接 dump 到文件中
json 模块中除了 dumps 函数，还有一个 dump 函数，这个函数可以传入一个文件指针，直接将字符串 dump 到文件中。
```
import json
books = [
    {'1':'刘'},
    {'2':'RONG'}
]
with open('1.json','w') as fp:
    json.dump(books,fp)
```

## loads 与 load 函数将 JSON 格式转成 Python 对象
```
import json
jsonBooks = '[{"1": "刘"}, {"2": "RONG"}]'
books = json.loads(jsonBooks)
print(type(books))
print(books)
with open('1.json','r',encoding='utf-8') as fp:
    json_Books = json.load(fp)
    print(json_Books)
---
<class 'list'>
[{'1': '刘'}, {'2': 'RONG'}]
[{'1': '刘'}, {'2': 'RONG'}]
```

---

# csv 文件处理

## reader 函数读取 csv 文件
```
import csv
with open('stock.csv','r') as fp:
    reader = csv.reader(fp)
    titles = next(reader)
    for x in reader:
        print(x)
```


# MySQL
[MySQL下载地址](https://dev.mysql.com/downloads/installer)

## 下载安装
1. 选择 community 社区版 mysql-installer-community-8.0.12.0.msi。
1. 选择安装类型的时候选择安装server only就可以了，避免安装不需要的组件。
1. 这样在下一步安装选项中就会只有MySQL Server 一项组件，一路默认输入数据库密码完成安装。
1. 使用 MySQL 8.0 Command Line Client 快捷连接，输入命令验证安装完成。

## 使用软件Navicat 软件进行连接，可视化操作。
新建数据库 pymysql 需要注意字符集一定要选择`utf8`的字符集

新建 user 表
添加字段 id 和 name
字段 id 默认左下角自动递增，并设置 id 为主键

使用 MySQL 8.0 Command Line Client 。
```
use pymysql
mysql> use pymysql
Database changed

show tables;
mysql> show tables;
+-------------------+
| Tables_in_pymysql |
+-------------------+
| user              |
+-------------------+

select * from user;
mysql> select * from user;
+----+------+
| id | name |
+----+------+
|  1 | liu  |
+----+------+
1 row in set (0.00 sec)
```

## 使用Python代码连接数据库
Python要想操作MySQL。必须要有一个中间件，或者叫做驱动程序。驱动程序有很多。
比如有mysqldb、mysqlclient、pymysql等。选择用 pymysql。安装方式也是非常简单，通过命令`pip install pymysql`即可安装。

PyCharm快键键 Ctrl+b 可以到函数定义 

connect = Connection = Connect
=》
from .connections import Connection
=》
def __init__(self, host=None, user=None, password="", ...

可以看到 connect 所有需要的参数

```python
import pymysql

db = pymysql.connect(
    host="127.0.0.1",
    user='root',
    password='admin123',
    database='pymysql',
    port=3306
)
cursor = db.cursor() # 创建游标
cursor.execute("select 1") # 返回 1 则说明连接正常
data = cursor.fetchone() # 取出一条数据
print(data)
db.close()
---
(1,)
```

# mongodb
[mongodb下载地址](https://www.mongodb.com/download-center#community)

选择 community 社区版 mongodb-win32-x86_64-2008plus-ssl-4.0.2-signed.msi
