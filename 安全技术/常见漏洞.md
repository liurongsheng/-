# 信息安全
## 什么是信息？
对企业正常发展具有影响作用的信息，敏感信息，不论是否有用，信息，资产，同其他商业资产一样，对企业而言是具有价值的，因而需要妥善保护。

## 什么是信息安全？
信息安全包括实体安全、运行安全、信息安全及人员安全，信息安全三个要素：保密性、可用性和完整性；

常见安全威胁有：窃取、截取、伪造、篁改、拒绝服务攻击、行为否认、非授权访问、传播病毒等；

能威胁到信息安全的人员，不仅仅有竞争对手、黑客，还包括了内部的员工。提高内部员工自身的安全意识能有效的保证企业信息的稳定与安全

计算机网络的安全，就是要保护网络信息在存储和传输过程中的可用性、机密性、完整性、可控性和不可抵赖性。

信息防泄漏保护体系包括详尽细致的操作审计、全面严格的操作授权、安全可靠的透明加密

## 信息泄漏的原因
信息泄漏的原因：内部人员无意泄密和恶意泄密、内部人员离职拷贝带走资料泄密、内部文档权限失控失密、存储设备丢失和维修失密、
对外信息发布失控失密、外部竞争对手窃密、黑客和间谍窃密。

## 加密方法有对称加密和非对称加密
常见的对称加密算法有DES、IDEA、RC2、RC4、SKIPJACK、RC5、AES算法等

常见的非对称加密算法有RSA Elgamal、背包算法、Rabin、D-H、ECC（椭园曲线加密算法）信息加密保存，
加密传输主要是为了防止数据改、防止数据窃取及防止数据假冒

## 敏感端口
业务服务器需要对敏感端口进行访问限制，敏感端口包括以下：
- 21 FTPS
- 22 SSH
- 23 telnet
- UDP123 NTP
- 873 rsync
- 1311 dell服务器的管理端口
- 1433 SQL database
- 1521 Oracles
- 3306 MySQL
- 3389 mstsc
- 5666 Nagios
- 8080 Apache Tomcat
- 9200 Elasticsearch
- 10050 Zabbix-Agent
- 6379 redis
- 11211 memcached
- 27017 mongodb
- 28017 mongodb 
- 36251 SSH 
- 49152 容易被利用端口

## 常见安全漏洞
- 跨站攻击
- SQL注入
- 缓冲区溢出
- 上传漏洞
- 目录遍历
- 信息泄露
- 软件安全
- 用户安全
- 其他

## 跨站攻击
跨站攻击：即 Cross Site Script Execution 通常简写为 XSS，是指攻击者利用网站程序对用户输入过滤不足，
输入可以显示在页面上对其他用户造成影响的 HTML 代码，从而盗取用用户身份进行某种动作或者对访问者进行病毒侵害的一种攻击方式

最常见，也是最有效地防止跨站攻击的方法是验证用户输入未包含危险字符，建议过滤出所有以下字符：
- 【|】（竖线符号）
- 【&】（&符号）
- 【;】（分号）
- 【$】（美元符号）
- 【%】（百分比符号）
- 【@】（at符号）
- 【‘】（单引号）
- 【“】（引号）
- 【\’】（反斜杠转义单引号）
- 【\“】（反斜杠转义引号）
- 【<>】（尖括号）
- 【()】（括号）
- 【+】（加号）
- 【CR】（回车符，ASCII OxOd）
- 【LF】（换行，ASCII 0x0a）
- 【,】（逗号）
- 【\】（反斜杠）

所谓用户输入，就是所有可能从客户端接收的数据，而不仅是我们提供给給用户的输入框；
所有用户输入都是非法的，除非被证明不是

## SQL注入
SQL注入攻击：指的是通过构建特殊地输入作为参数传入应用程序，而这些输入大都是 SQL 语法里的一些组合，通过执行 SQL 语句进而执行攻击者所要的操作，
其主要原因是程序没有过滤用户输入的数据，致使非法数据侵入系统。

1. 永远不要信任用户的输入。对用户的输入进行校验，可以通过正则表达式，或限制长度对单引号和双”-“进行转换等
1. 永远不要使用动态拼装SQL，可以使用参数化的 SQL 或者直接使用存储过程进行数据查询存取
1. 永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接
1. 不要把机密信息直接存放，加密或者 hash 掉密码和敏感的信息
1. 应用的异常信息应该给出尽可能少的提示，最好使用自定义的错误信息对原始错误信息进行包装
1. 可以采取辅助软件或网站平台来检测 SQL 注入

## 缓存区溢出
缓冲区溢出：是指当计算机向缓冲区内填充数据位数时超过了缓冲区本身的容量，
使得溢出数据覆盖在合法数据上，理想的情况是程序检查数据长度并不允许输入超过缓冲区长度的字符，
但是绝大多数的程序都会假设数据长度总是与所分配的储存空间相匹配，这就为缓冲区溢出埋下隐患
1. 在数据拷贝前应做相应的长度检查
1. 使用带长度检查的字符串拷贝函数
1. 检查程序中的缓冲区访问，确保使用安全的字符串和缓冲区处理函数
1. 充分利用基于编译器的（如 ProPolice）防护措施和操作系统级别的缓冲区溢出防御措施（如 DEP 和 PaX），但仅仅这些是不够的
1. 用源代码扫描器（FlowFinder、RATS、ITS4）粗略检查代码可能存在的安全问题

## 上传漏洞
上传漏洞：主要是由于代码中的文件上传路径变量过滤不严造成

有时攻击者可以直接提交修改过的数据绕过所谓的扩展名的检验。

Apache文件解析问题：apache对于文件名的解析是从后往前解析的，直到遇见一个 apache 认识的文件类型为止，
利用这个解析功能，可以绕过简单的上传文件后缀检查

IIS文件解析问题：IIS6在处理文件解析的时候，分号“;”为截断字符，如 abc.asp;xx.jpg 会被解析为 abc.asp，从而导致脚本可以被执行。

1. 预防上传漏洞：最有效的办法就是对上传的文件进行验证，包括文件的类型（后缀名）、文件的内容等
1. 在对文件类型进行验证的时候，使用白名单的方式，允许上传的类型，而不是黑名单。
1. 对上传的文件进行重命名，能有效的降低安全风险。
1. 相较于在客户端进行验证，在服务器端进行验证更有效果。

在服务器端应该对相应的设置
- 尽量将上传使用的服务器（包括图片服务器、附件服务器等）和应用程序服务器分离开来
- 对上传点目录权限进行设置，不具有执行权限
- 有时些第三方柜架会产生上传漏洞，这时就该及时的进行补丁、软件版本的更新

## 目录遍历漏洞
如果 web 设计者设计的 web 内容没有恰当的访问控制，允许 http 遍历，攻击者通过访问根目录发送一系列 “../“ 字符来遍历高层目录，并且可以执行系统命令，甚至使系统崩溃。
1. 净化数据：对用户传过来的文件名参数进行硬编码或统一编码，对文件类型进行白名单控制，对包含恶意字符或者空字符的参数进行拒绝
1. 做好目录的访问控制

## 信息泄露
cookie
1. cookie包含了一些敏感信息：用户名，计算机名，使用的浏览器和曾经访问的网站等私人或敏感信息
1. 对 cookie 进行加密或添加其他参数能有效的增加 cookie的安全性
1. 使用最具限制性的域和路径来限制对会话使用的 cookie 的访问

管理后台
1. 管理后台的登陆应该进行限制，而不是开放给公网
1. 后台管理的的账户密码应满足复杂度的要求，定期更换，并妥善保管

敏感信息
1. 不论是在传输还是在本地存储过程中，用户名、密码等信息都应该加密处理，必要时增加时间戳等其他参数
1. 时使用第三方软件或框架时，应当修改默认的配置，更改默认密码
1. 采用自定义的错误界面，并且不显示具体的错误信息

## 软件安全
软件安全就是为计算机软件系统建立和采取的技术和管理的安全保护，保护计算机软件、数据不因偶然或恶意的原因
而遭破坏、更改、显露、盗版、非法复制，保证软件系统能正常连续运行

任何软件都是不安全的，软件安全并不是指安全的软件
软件安全的7个接触点：代码审核，体系结构风险分析，渗透测试，基于风险的安全测试、滥用案例，安全需求，安全操作
- 白盒测试：即对于测试人员来说，所有关于被测试的系统的信息都是已知的
- 黑盒测试又叫功能测试，它主要关注的是被测试软件功的实现，而不是内部逻辑
- 灰盒测试是指在安全测试期间，一起使用白盒和黑盒两种测试技术
- 渗透测试是从攻击的角度测试软件系统是否安全，其价值在于可以测试软件发布到实际系统中的安全状况

1. 软件开发过程中，应注意权限问题，应支持以最小特权运行，即使必须用高级权限，也应该设置合适的权限，而不是更多的权限
1. 好的开发工具有助于开发，但是开发工具只是—个辅助
1. 软件安全是种系统级的问题，需要考虑安全机制（比如访问控制）和基于安全的设计（比如使攻击难以实施的设计）
1. 软件安全必须成为完整的软件开发生命周期方法的一部分
1. 在软件开发过程中，及时总结知识，并用知识来教育所有相关人员，对确保软件安全至关重
1. 安全开发周期：即 Security Development Lifecycle（SDL)，是微软提出的从安全角度指导软件开发过程的管理模式

## 权限控制
垂直权限管理：访问控制建立用户与权限之间的对应关系，基于角色的权限管理（RBAC模型）我们称为垂直权限管理
水平权限管理：访问控制产生在数据级的访问控制，即基于数据的访问控制，我们称之为水平权限管理

相对与垂直权限管理，水平权限问题出在同一个角色上。系统只验证了能访问数据的角色，
没有对角色内的用户做细分。缺乏用户到数据之间的访问控制

安全域：在同一工作环境中具有相同或相似安全保护需求和保护策略、相互信任、相互关联或相互作用的要素的集合。

## 其他
1. OPENSSL 1.0.1g以前版本存在“心脏出血”漏洞，可能被黑客攻击抓取用户计算机上的内存数据
1. Struts 2.0 至 Struts2.3 存在远程代码执行漏洞，黑客可利用此漏洞入侵、控制服务器
1. SSL2.0、SSL3.0安全协议存在已知严重安全问题
1. 不论是软件还是服务器，都要遵循最小化安装的原则，关闭任何不需要的功能或扩展
1. C/C++本身对安全问题考虑不周，尝试使用其他安全性较高的编程语言替代它
